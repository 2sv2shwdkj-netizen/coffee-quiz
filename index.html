<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Perfect Brew Selector | Your Coffee Page</title>
    <style>
        /* --- Basic Reset & Variables --- */
        :root {
            --color-primary: #38241A; /* Dark Coffee Brown */
            --color-secondary: #9F8A7D; /* Light Tan/Cream */
            --color-accent: #C28E6F; /* Warm Copper */
            --color-background: #F8F7F5; /* Off-White/Paper */
            --font-body: 'Georgia', serif;
            --font-heading: 'Helvetica Neue', sans-serif;
        }

        body {
            font-family: var(--font-body);
            color: var(--color-primary);
            background-color: var(--color-background);
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }

        /* --- Layout & Container --- */
        .container {
            max-width: 900px; 
            margin: 0 auto;
            padding: 30px;
            background: white;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
        }

        /* --- Typography --- */
        h1 {
            font-family: var(--font-heading);
            color: var(--color-accent);
            text-align: center;
            margin-bottom: 5px;
            font-size: 2.5em;
        }

        h2 {
            font-family: var(--font-heading);
            font-size: 1.6em;
            color: var(--color-primary);
            border-bottom: 2px solid var(--color-accent);
            padding-bottom: 5px;
            margin-top: 30px;
        }
        
        h3.carousel-title {
            font-family: var(--font-heading);
            font-size: 1.3em;
            margin-top: 40px;
            margin-bottom: 15px;
            color: var(--color-primary);
        }

        p.intro {
            text-align: center;
            margin-bottom: 40px;
            font-size: 1.1em;
            color: var(--color-secondary);
        }

        /* --- Quiz Form Styling --- */
        .question-group {
            margin-bottom: 25px;
            padding: 15px;
            border-bottom: 1px dashed var(--color-secondary);
        }

        .question-group label {
            display: block;
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--color-primary);
        }

        .option {
            display: inline-block;
            margin-right: 15px;
            margin-bottom: 10px;
            cursor: pointer;
        }

        .option input[type="radio"] {
            display: none;
        }

        .option span {
            display: inline-block;
            padding: 8px 15px;
            border: 2px solid var(--color-secondary);
            border-radius: 5px;
            transition: all 0.2s;
            font-size: 0.95em;
        }

        .option input[type="radio"]:checked + span {
            background-color: var(--color-accent);
            color: white;
            border-color: var(--color-accent);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        /* --- Button --- */
        button {
            display: block;
            width: 100%;
            padding: 12px;
            margin-top: 30px;
            background-color: var(--color-primary);
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1.2em;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #5A392A;
        }

        /* --- Results Section --- */
        #results {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 2px solid var(--color-accent);
            display: none; 
        }
        
        #final-method-name {
            font-size: 2em;
            color: var(--color-accent);
            text-align: center;
            margin: 10px 0 20px 0;
        }

        /* --- Product Carousel Styling --- */
        .product-carousel {
            display: flex;
            overflow-x: scroll; 
            gap: 15px;
            padding: 15px 0; 
            margin-bottom: 20px;
            border: 1px solid #eee;
            border-radius: 5px;
            background: #fafafa;
        }

        .product-item {
            flex: 0 0 200px; 
            text-align: center;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background: white;
        }

        .product-item img {
            width: 100%;
            height: 150px;
            object-fit: cover;
            border-radius: 4px;
            margin-bottom: 10px;
            background-color: #e0e0e0; 
        }

        .product-item p {
            font-size: 0.9em;
            font-weight: bold;
            height: 30px; 
            overflow: hidden;
            margin-bottom: 5px;
        }
        
        .product-item .price {
            display: block;
            font-size: 1.1em;
            color: var(--color-accent);
            font-weight: bold;
            margin-bottom: 10px;
        }

        .product-item a {
            display: block;
            padding: 6px 10px;
            background-color: var(--color-primary);
            color: white;
            text-decoration: none;
            border-radius: 3px;
            font-size: 0.8em;
            transition: background-color 0.3s;
        }

        .product-item a:hover {
            background-color: var(--color-accent);
        }

        /* --- Footer/Attribution --- */
        footer {
            text-align: center;
            margin-top: 40px;
            font-size: 0.8em;
            color: var(--color-secondary);
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>The Perfect Brew Selector</h1>
        <p class="intro">Find your ideal coffee ritual in three simple questions.</p>

        <form id="brew-selector-form">
            <div class="question-group">
                <label>1. How much time are you willing to spend on your ritual?</label>
                <div class="options">
                    <label class="option"><input type="radio" name="time" value="quick" required><span>‚òï Less than 5 mins (Speed)</span></label>
                    <label class="option"><input type="radio" name="time" value="moderate"><span>‚è≥ 5 - 10 mins (Balanced)</span></label>
                    <label class="option"><input type="radio" name="time" value="slow"><span>‚ú® 10+ mins (Mindful/Slow Morning)</span></label>
                </div>
            </div>

            <div class="question-group">
                <label>2. What kind of flavor profile do you prefer?</label>
                <div class="options">
                    <label class="option"><input type="radio" name="flavor" value="strong"><span>‚ö° Strong, heavy body, bold</span></label>
                    <label class="option"><input type="radio" name="flavor" value="clean"><span>üçã Clean, bright, nuanced, transparent</span></label>
                    <label class="option"><input type="radio" name="flavor" value="rich"><span>üå∞ Rich, creamy, balanced, oily</span></label>
                </div>
            </div>

            <div class="question-group">
                <label>3. How much coffee do you usually make?</label>
                <div class="options">
                    <label class="option"><input type="radio" name="volume" value="single"><span>One perfect cup</span></label>
                    <label class="option"><input type="radio" name="volume" value="multiple"><span>2-4 cups / A whole carafe</span></label>
                </div>
            </div>

            <button type="submit">Find My Perfect Brew!</button>
        </form>

        <div id="results">
            <h2>Your Perfect Match Is...</h2>
            <h3 id="final-method-name"></h3>
            <p id="method-description" style="text-align: center; font-style: italic;"></p>

            <h3 class="carousel-title">Your Essential Starter Kit: Everything You Need for <span id="kit-name"></span></h3>
            <div class="product-carousel" id="recommended-kit-carousel">
                </div>

            <h3 class="carousel-title">Aesthetic Accessories for Your Slow Morning</h3>
            <div class="product-carousel" id="accessory-carousel">
                </div>

            <h3 class="carousel-title">The Ultimate Upgrade: Pro-Grade Espresso</h3>
            <div class="product-carousel" id="high-ticket-carousel">
                </div>
        </div>

        <footer>
            <p>&copy; 2024 Your Coffee Page. Affiliate links help support slow mornings. ‚òï</p>
        </footer>
    </div>

    <script>
        const form = document.getElementById('brew-selector-form');
        const resultsDiv = document.getElementById('results');
        const finalMethodName = document.getElementById('final-method-name');
        const methodDescription = document.getElementById('method-description');
        const recommendedKitCarousel = document.getElementById('recommended-kit-carousel');
        const kitName = document.getElementById('kit-name');
        const accessoryCarousel = document.getElementById('accessory-carousel');
        const highTicketCarousel = document.getElementById('high-ticket-carousel');


        // --- PRODUCT DATA TEMPLATE ---
        // NEW STRUCTURE: { name: "Product Name", price: 00.00, img: "Image URL", link: "Affiliate Link" }

        // Helper function to render product carousels
        function renderCarousel(carouselElement, products) {
            carouselElement.innerHTML = ''; // Clear previous content
            products.forEach(item => {
                // Determine price display: use price if available, otherwise hide it.
                const priceDisplay = item.price 
                    ? `<span class="price">$${item.price.toFixed(2)}</span>` 
                    : '';
                
                const productItem = document.createElement('div');
                productItem.className = 'product-item';
                // NOTE: Using item.name, item.img, and item.link
                productItem.innerHTML = `
                    <img src="${item.img}" alt="${item.name}">
                    <p>${item.name}</p>
                    ${priceDisplay}
                    <a href="${item.link}" target="_blank" rel="noopener noreferrer">
                        See on Amazon üîó
                    </a>
                `;
                carouselElement.appendChild(productItem);
            });
        }

        // --- 1. DYNAMIC KIT DATA (You MUST edit the objects within this section) ---
        const brewMethods = {
            'espresso': {
                name: "Espresso Machine (The Power Shot)",
                kit_title: "Espresso",
                description: "You need speed and strength! A good entry-level espresso setup delivers the ultimate rich flavor with minimal waiting.",
                gear: [
                    // Example Data using your new structure:
                        { name: "Breville Bambino Espresso Machine", price: 299.95, img: "https://m.media-amazon.com/images/I/61egYXcL9OL._AC_SL1500_.jpg", link: "https://amzn.to/4agw1i5" },
                        { name: "Grinder (Crucial for Espresso)", price: 199.95, img: "https://m.media-amazon.com/images/I/61x8TZA1Q6L._AC_SL1500_.jpg", link: "https://amzn.to/48UkXVB" },
                        { name: "Tamper & Distributor Tool", price: 56.99, img: "https://m.media-amazon.com/images/I/816TsTxlxzL._AC_SL1500_.jpg", link: "https://amzn.to/3MtL5PJ" },
                        { name: "Knock Box", price: 29.99, img: "https://m.media-amazon.com/images/I/61v3ls-Uh4L._AC_SL1500_.jpg", link: "https://amzn.to/453ryvB" },
                ]
            },
            'aeropress': {
                name: "AeroPress (The Versatile Workhorse)",
                kit_title: "AeroPress",
                description: "Quick, clean, and able to produce everything from a concentrated shot to a full cup. It's the perfect balance of speed and flavor control.",
                gear: [
                    { name: "AeroPress Original", price: 39.95, img: "https://m.media-amazon.com/images/I/61u3sW4Vx4L._AC_SL1500_.jpg", link: "https://amzn.to/3XRwNuH" },
                    { name: "Basic Hand Burr Grinder", price: 95, img: "https://m.media-amazon.com/images/I/71arLLhAqwL._AC_SL1500_.jpg", link: "https://amzn.to/48O7iPS" },
                    { name: "Reusable Metal Filter", price: 14.95, img: "https://m.media-amazon.com/images/I/61p7idkiv6L._AC_SL1500_.jpg", link: "https://amzn.to/44oSGoS" },
                    { name: "Travel Kettle", price: 35.99, img: "https://m.media-amazon.com/images/I/71TO5mmTCmL._AC_SL1500_.jpg", link: "https://amzn.to/3Yyv3GJ" },
                ]
            },
            'pourover': {
                name: "Pour-Over (V60/Chemex - The Mindful Brew)",
                kit_title: "Pour-Over",
                description: "You crave nuance and are happy to slow down. Pour-over extracts the cleanest, brightest flavors, ideal for a careful morning ritual.",
                gear: [
                    { name: "Hario V60", price: 44.5, img: "https://m.media-amazon.com/images/I/61GYmsOttwL._AC_SL1500_.jpg", link: "https://amzn.to/4iNE8oK" },
                    { name: "Electric Gooseneck Kettle", price: 199.95, img: "https://m.media-amazon.com/images/I/51VeHuW95LL._AC_SL1500_.jpg", link: "https://amzn.to/4iTvmoW" },
                    { name: "High-Quality Burr Grinder", price: 139, img: "https://m.media-amazon.com/images/I/51jjHC8ZFbL._AC_SL1400_.jpg", link: "https://amzn.to/44Ocn9R" },
                    { name: "V60 Paper Filters", price: 8, img: "https://m.media-amazon.com/images/I/61iXYB9ObhL._AC_SL1500_.jpg", link: "https://amzn.to/3XUK9pT" },
                ]
            },
            'frenchpress': {
                name: "French Press (The Rich & Simple Classic)",
                kit_title: "French Press",
                description: "You prefer a full, rich body and the ability to make a big batch easily. This method is forgiving and delivers a deeply satisfying cup.",
                gear: [
                    { name: "Large French Press (Insulated)", price: 39.95, img: "https://m.media-amazon.com/images/I/61V-VGqgHqL._AC_SL1500_.jpg", link: "https://amzn.to/44VBIys" },
                    { name: "Coarse Grind Manual Grinder", price: 46.99, img: "https://m.media-amazon.com/images/I/71qrBYgxuxL._AC_SL1500_.jpg", link: "https://amzn.to/4iUuujX" },
                    { name: "Coffee Scale & Timer", price: 21.99, img: "https://m.media-amazon.com/images/I/61oAam7DS7L._AC_SL1500_.jpg", link: "https://amzn.to/4rO6J14" },
                ]
            }
        };

        // --- 2. FIXED ACCESSORY DATA (You MUST edit the objects within this section) ---
        const accessoryProducts = [
            { name: "Minimalist Clay Coffee Mug", price: 34.95, img: "https://m.media-amazon.com/images/I/61KEYc8dtvL._AC_SL1500_.jpg", link: "https://amzn.to/452Ufcb" },
            { name: "Precision Digital Coffee Scale", price: 21.99, img: "https://m.media-amazon.com/images/I/61oAam7DS7L._AC_SL1500_.jpg", link: "https://amzn.to/4rO6J14" },
            { name: "Acacia Wood Drip Tray", price: 26.49, img: "https://m.media-amazon.com/images/I/71VMpiQQTzL._AC_SL1500_.jpg", link: "https://amzn.to/452UCU7" },
            { name: "Airtight Coffee Bean Container", price: 37.99, img: "https://m.media-amazon.com/images/I/61W+fLrZzjL._AC_SL1500_.jpg", link: "https://amzn.to/45aH74L" },
            { name: "Measuring Scoop with Clip", price: 8.58, img: "https://m.media-amazon.com/images/I/61zs-bOMDhL._AC_SL1500_.jpg", link: "https://amzn.to/4pGIctx" },
        ];

        // --- 3. FIXED HIGH-TICKET DATA (You MUST edit the objects within this section) ---
        const highTicketProducts = [
            // Note: The Breville Bambino is placed here for demonstration, as it's a high-ticket item
            { name: "Rancilio Silvia", price: 995, img: "https://m.media-amazon.com/images/I/81Btdyik0RL._AC_SL1500_.jpg", link: "https://amzn.to/4oTlPQk" },
            { name: "Diletta Bello+", price: 2149, img: "https://m.media-amazon.com/images/I/71VQoUx0VVL._AC_SL1500_.jpg", link: "https://amzn.to/3MulLZU" },
            { name: "Breville Barista Express", price: 699.95, img: "https://m.media-amazon.com/images/I/71BvCt6eAFL._AC_SL1500_.jpg", link: "https://amzn.to/4iTggjo" },
        ];


        // --- INITIAL RENDER OF FIXED CAROUSELS ---
        // Run this once when the page loads
        renderCarousel(accessoryCarousel, accessoryProducts);
        renderCarousel(highTicketCarousel, highTicketProducts);


        // --- Calculation Logic (Same as before) ---
        form.addEventListener('submit', function(event) {
            event.preventDefault();

            // 1. Gather inputs
            const time = form.elements['time'].value;
            const flavor = form.elements['flavor'].value;
            const volume = form.elements['volume'].value;

            let resultMethod = 'aeropress'; 

            if (time === 'quick') {
                if (flavor === 'strong' && volume === 'single') {
                    resultMethod = 'espresso';
                } else {
                    resultMethod = 'aeropress';
                }
            } else if (time === 'slow') {
                resultMethod = 'pourover'; 
            } else { // Moderate time
                if (flavor === 'clean' || volume === 'single') {
                    resultMethod = 'aeropress';
                } else if (flavor === 'rich' || volume === 'multiple') {
                    resultMethod = 'frenchpress';
                } else {
                    resultMethod = 'aeropress';
                }
            }

            // 2. Display Results
            displayResults(brewMethods[resultMethod]);
        });

        function displayResults(method) {
            // Update Method Name and Description
            finalMethodName.textContent = method.name;
            methodDescription.textContent = method.description;
            kitName.textContent = method.kit_title;

            // Render the Dynamic Recommended Kit Carousel
            renderCarousel(recommendedKitCarousel, method.gear);

            // Show the results section
            resultsDiv.style.display = 'block';

            // Smooth scroll to the results
            resultsDiv.scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>
</html>
